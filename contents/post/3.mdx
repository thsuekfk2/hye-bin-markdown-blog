---
title: "Web Worker"
date: 2023-12-24
description: "ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ê°œë°œì„ í•˜ë©´ì„œ ë³µì¡í•œ ê³„ì‚° ì²˜ë¦¬ë‚˜ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ì²˜ë¦¬í•  ì¼ì´ ìƒê²¼ë‹¤. í•˜ì§€ë§Œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œ ì œì•½ì„ ê·¹ë³µí•˜ê³  ë³‘ë ¬ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ ëª»í•˜ëŠ” ê±¸ê¹Œ ? íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì°¾ë˜ ì¤‘ì— ì›¹ ì›Œì»¤ë¼ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ì˜¤ëŠ˜ì€ ì›¹ ì›Œì»¤ì— ëŒ€í•´ì„œ ê³µë¶€í•œ ë‚´ìš©ê³¼ ì ìš©í•œ ì½”ë“œë¥¼ ë³´ë©´ì„œ ê³µë¶€í•´ë³´ë ¤ê³  í•œë‹¤."
thumbnail: "/post/3/cover.png"
---

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ê°œë°œì„ í•˜ë©´ì„œ ë³µì¡í•œ ê³„ì‚° ì²˜ë¦¬ë‚˜ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ì²˜ë¦¬í•  ì¼ì´ ìƒê²¼ë‹¤. í•˜ì§€ë§Œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œ ì œì•½ì„ ê·¹ë³µí•˜ê³  ë³‘ë ¬ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ ëª»í•˜ëŠ” ê±¸ê¹Œ ? ğŸ¤” íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì°¾ë˜ ì¤‘ì— ì›¹ ì›Œì»¤ë¼ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ì˜¤ëŠ˜ì€ ì›¹ ì›Œì»¤ì— ëŒ€í•´ì„œ ê³µë¶€í•œ ë‚´ìš©ê³¼ ì ìš©í•œ ì½”ë“œë¥¼ ë³´ë©´ì„œ ê³µë¶€í•´ë³´ë ¤ê³  í•œë‹¤.

## ì‹±ê¸€ìŠ¤ë ˆë“œ ë°©ì‹

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì‹±ê¸€ìŠ¤ë ˆë“œ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤. ë”°ë¼ì„œ í•œë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ìŠ¤íƒì´ í•˜ë‚˜ë°–ì— ì—†ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œì–¸ì–´(== í•œë²ˆì— ì½”ë“œ í•œì¤„ ë°–ì— ì‹¤í–‰ ëª»í•¨)ë¼ê³  í•œë‹¤.

ë©”ì¸ ìŠ¤ë ˆë“œëŠ” UI ìŠ¤ë ˆë“œë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë° ì´ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì£¼ë¡œ ì‚¬ìš©ìì˜ ìƒí˜¸ ì‘ìš©, ì´ë²¤íŠ¸ ì²˜ë¦¬, DOM ì¡°ì‘ ë“±ì´ ì£¼ë¡œ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì½”ë“œ ë¼ì¸ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ì§€ë§Œ ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ ë£¨í”„ ë°©ì‹ì´ ìˆë‹¤.

ì½”ë“œê°€ ì‹¤í–‰ë˜ë©´ í•œ íƒœìŠ¤í¬ì”© ìŠ¤íƒì— ìŒ“ì´ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ë¹„ë™ê¸° ì‘ì—…ì´ë‚˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ë¨¼ì € íì— ìˆœì°¨ì ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤. ì´ë²¤íŠ¸ ë£¨í”„ê°€ ì´ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ê³  ìˆë‹¤ê°€ ìŠ¤íƒì´ ë¹„ì–´ ìˆì„ë•Œ íì— ìˆëŠ” ì²˜ë¦¬ê°€ ì™„ë£Œ ëœ ì½”ë“œë“¤ì´ ìŠ¤íƒìœ¼ë¡œ ì´ë™ì‹œí‚¨ë‹¤. ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë¹„ë™ê¸°ì ì¸ ì‘ì—…ì´ ë™ì‘í•˜ë©´ì„œë„ ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì°¨ë‹¨ë˜ì§€ ì•Šê³  ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

## ì´ë²¤íŠ¸ ë£¨í”„ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ê±° ì•„ëƒ ? ì›¹ ì›Œì»¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë­ì•¼ ?

ì´ë²¤íŠ¸ ë£¨í”„ì™€ ì›¹ ì›Œì»¤ëŠ” ë‘˜ ë‹¤ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸°ì ì¸ ì‘ì—…ì„ ë‹¤ë£¨ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜ì´ì§€ë§Œ ì›¹ ì›Œì»¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì£¼ë¡œ ì„±ëŠ¥ í–¥ìƒê³¼ ì‘ì—…ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•¨ì´ë‹¤.

ë°ì´í„° ì²˜ë¦¬ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë³‘ëª©í˜„ìƒì´ ìƒê²¨ UI ì—…ë°ì´íŠ¸ê°€ ì§€ì—°ë˜ê³  ì‚¬ìš©ìì—ê²Œ ëŠë¦¬ê²Œ ëŠê»´ì§€ê²Œ ëœë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë¸Œë¼ìš°ì €ì—ì„œ Web Worker APIë¥¼ ì œê³µí•˜ê³  ìˆë‹¤.

1. ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì¸í•œ ì„±ëŠ¥ í–¥ìƒ

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ë©”ì¸ìŠ¤ë ˆë“œì—ì„œë§Œ ì‹¤í–‰ë˜ì§€ë§Œ ì›¹ ì›Œì»¤ëŠ” ë³„ë„ì˜ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ í†µí•´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.

íŠ¹íˆ, ê³„ì‚°ì´ ë§ì´ í•„ìš”í•œ ì‘ì—…ì´ë‚˜ ê¸´ ì§€ì† ì‹œê°„ì˜ ì‘ì—…ì„ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ë©”ì¸ ìŠ¤ë ˆë“œê°€ ë‹¤ë¥¸ ì‘ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

2. ë©”ì¸ìŠ¤ë ˆë“œ ì„±ëŠ¥ ê°œì„ 

ë©”ì¸ ìŠ¤ë ˆë“œ(==UI ìŠ¤ë ˆë“œ)ì™€ ë¹„êµí–ˆì„ ë•Œ, ì›¹ ì›Œì»¤ì—ëŠ” DOMê³¼ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ì—†ë‹¤. ì›¹ ì›Œì»¤ëŠ” ë³µì¡í•œ ê³„ì‚° ë˜ëŠ” ê¸´ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ì‘ì—…ì„ ë‹´ë‹¹í•˜ë¯€ë¡œ, ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ì£¼ë¡œ UI ê°±ì‹ , ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ ë“±ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.

3. ë³µì¡í•œ ê³„ì‚° ë° ë°ì´í„° ì²˜ë¦¬

ì›¹ ì›Œì»¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ê³„ì‚°ì´ ë§ê±°ë‚˜ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë¶„ë¦¬í•˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ì‚¬ìš©ëœë‹¤.

ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê±°ë‚˜ ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•˜ëŠ” ì‘ì—…ì„ ì›¹ ì›Œì»¤ë¥¼ í™œìš©í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œì˜ ë¶€ë‹´ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

## Web Work ì‚¬ìš©í•´ë³´ê¸°

ê°„ë‹¨í•˜ê²Œ ì›¹ì›Œì»¤ë¥¼ ì‚¬ìš©í•œê²ƒê³¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²ƒì„ êµ¬í˜„í•´ë³´ë©° ë¹„êµí•´ë³´ì.

![post](/post/3/1.png)

ì¼ë‹¨ ë‘ê°œì˜ ë²„íŠ¼ì„ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤. `count+1` ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ countê°€ 1ì”© ì¦ê°€ë˜ê³  , `answer+100` ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ answerì´ 100ì”© ì¦ê°€í•œë‹¤.

í•˜ì§€ë§Œ `answer+100` ì˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ 500000000ë²ˆì„ ëŒë¦¬ëŠ” ë³µì¡í•œ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.

### Non worker

ì›¹ì›Œì»¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° ëŒë ¤ë³´ì.

```jsx
import React, { useState } from "react";

export const NonWorker = () => {
  const [count, setCount] = useState(0);
  const [answer, setAnswer] = useState(0);

  const getAnswer = () => {
    let sum = 0;
    for (let i = 0; i < 500000000; i++) {
      sum += i;
    }
    setAnswer((prev) => prev + 100);
  };

  return (
    <div className="box-wrap">
      <div className="text-wrap">count : {count}</div>
      <div className="text-wrap">answer : {answer}</div>
      <button
        className="custom-button"
        onClick={() => setCount((prev) => prev + 1)}
      >
        count + 1
      </button>
      <button className="custom-button" onClick={getAnswer}>
        answer + 100
      </button>
    </div>
  );
};
```

![gif](/post/3/non-worker.gif)

`answer+100` ë²„íŠ¼ì„ ëˆ„ë¥´ì 500000000ë²ˆì˜ ë£¨í”„ê°€ ë‹¤ ëŒë•Œê¹Œì§€ coun+1ì˜ ë²„íŠ¼ì„ ë§ˆêµ¬ ëˆŒëŸ¬ë„, UIì˜ ë°˜ì‘ì´ ì—†ì—ˆë‹¤. ê·¸ë¦¬ê³  ë£¨í”„ê°€ ëë‚˜ë©´ countì˜ ê°’ì´ í•œë²ˆì— ë°”ë€ŒëŠ” í˜„ìƒì´ ë‚˜íƒ€ë‚¬ë‹¤.

ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì‚´í´ë³´ì.

![post](/post/3/event-1.png)

getAnswerí•¨ìˆ˜ê°€ ì˜¤ëœì‹œê°„ ê±¸ë¦¬ê¸°ë•Œë¬¸ì—, ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œëŠ” ì´ í•¨ìˆ˜ê°€ ëë‚  ë•Œ ê¹Œì§€ ë‹¤ë¥¸ ì´ë²¤íŠ¸ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³  íì— ìŒ“ì´ê²Œ ëœë‹¤. ì¦‰, ì´ í•¨ìˆ˜ì˜ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ë‹¤ë¥¸ ì´ë²¤íŠ¸ë‚˜ ì‘ì—…ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³  ê¸°ë‹¤ë ¤ì„œ UI ì—…ë°ì´íŠ¸ë‚˜ ì´ë²¤íŠ¸ ì‘ë‹µê³¼ ê°™ì€ ì‘ì—…ë“¤ì´ ë¸”ë¡œí‚¹ëœê²ƒ.

### Web Worker

Web WorkerëŠ” í•„ìš”í•œ ê°œìˆ˜ë§Œí¼ ìƒì„±í•  ìˆ˜ ìˆê³  ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

ì¼ë‹¨ ì˜¤ë˜ ê±¸ë¦¬ëŠ” í•¨ìˆ˜ë¥¼ worker.jsì— ë”°ë¡œ ì˜®ê²¨ì£¼ì.

```jsx
// utils/worker.js

onmessage = (event) => {
  if (event.data === "start") {
    let sum = 0;
    for (let i = 0; i < 500000000; i++) {
      sum += i;
    }
    console.log(sum);
    postMessage(100);
  }
};
```

```jsx
import React, { useState } from "react";

const url = new URL("../utils/worker.js", import.meta.url);
const worker = new Worker(url);

export const WebWorker = () => {
  const [count, setCount] = useState(0);
  const [answer, setAnswer] = useState(0);

  const getAnswer = () => {
    worker.postMessage("start");
    worker.onmessage = (event) => setAnswer((prev) => prev + event.data);
  };

  return (
    <div className="box-wrap">
      <div className="text-wrap">count : {count}</div>
      <div className="text-wrap">answer : {answer}</div>
      <button
        className="custom-button"
        onClick={() => setCount((prev) => prev + 1)}
      >
        count + 1
      </button>
      <button className="custom-button" onClick={getAnswer}>
        answer + 100
      </button>
    </div>
  );
};
```

Worker() ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ì—¬ ì›Œì»¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í•  ìŠ¤í¬ë¦½íŠ¸ì˜ ê²½ë¡œë¥¼ ì§€ì •í•˜ë©´ë©´ ëœë‹¤. ì´ë•Œ, Webpackì—ì„œ Worker APIë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” Worker ìƒì„±ê³¼ URL ìƒì„±ì„ ëª¨ë‘ ì¸ë¼ì¸ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•œë‹¤. ( ì´ ë¶€ë¶„ì—ì„œ ì‚½ì§ˆì„ ê½¤ í–ˆë‹¤.. ã… \_ã…œ)

ë©”ì¸ ìŠ¤ë ˆë“œì™€ Web WorkerëŠ” ë©”ì‹œì§€ ë°©ì‹ìœ¼ë¡œ ì„œë¡œ í†µì‹ í•˜ë©° ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ”ë‹¤. postMessage() ë©”ì„œë“œì™€ onmessage ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ ë©”ì¸ìŠ¤ë ˆë“œì™€ ì›Œì»¤ëŠ” ë©”ì„¸ì§€ë¡œ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.

- `worker.postMessage("start")` : ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ì›Œì»¤ì—ê²Œ "start" ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤.
- `worker.onmessage = (event) => setAnswer((prev) => prev + event.data)` **:** ì›¹ì›Œì»¤ë¡œ ë¶€í„° ë©”ì„¸ì§€ë¥¼ ë°›ì•„ ë©”ì¸ ìŠ¤ë ˆë“œì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

![gif](/post/3/worker.gif)

answer + 100 ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ count+1 ë²„íŠ¼ì´ ëˆŒë¦¬ë©´ì„œ UIë˜í•œ ì¦‰ê°ì ìœ¼ë¡œ ë°”ë€ŒëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì‚´í´ë³´ì.

![post](/post/3/event-2.png)

![post](/post/3/event-3.png)

answer+100 ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, WebWork APIì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê³  ìŠ¤íƒì€ ë¹„ì›Œì§€ê²Œ ëœë‹¤.

ê·¸ë¦¬ê³  ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ìƒˆë¡œë“¤ì–´ì˜¨ í´ë¦­ì´ë²¤íŠ¸ë¥¼ ìŠ¤íƒìœ¼ë¡œ ì˜¬ë ¤ì„œ ë°”ë¡œë°”ë¡œ ì²˜ë¦¬í•˜ê³  (ì´ ë•Œë¬¸ì— ì¦‰ê°ì ì¸ ë°˜ì‘ì´ ê°€ëŠ¥í•œê²ƒ!) WebWorkê°€ ì‘ë‹µì´ ì™„ë£Œë˜ë©´ íì— ì˜¬ë¦¬ê³  ìŠ¤íƒì´ ë¹„ì›Œì§€ë©´ ë‹¤ì‹œ ìŠ¤íƒìœ¼ë¡œ ì˜¬ë¦°ë‹¤. ìŠ¤íƒì˜ ì¼ì´ ë‹¤ ì²˜ë¦¬ë©´ë˜ UIê°€ ì—…ë°ì´íŠ¸ ëœë‹¤!

## ì°¸ê³  ìë£Œ

[https://tech.kakao.com/2021/09/02/web-worker/](https://tech.kakao.com/2021/09/02/web-worker/)

[https://www.youtube.com/watch?v=JMKLXGwltGc](https://www.youtube.com/watch?v=JMKLXGwltGc)

[https://jeong-ki.github.io/web_worker/](https://jeong-ki.github.io/web_worker/)
