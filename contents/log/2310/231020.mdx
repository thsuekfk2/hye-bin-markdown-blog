---
title: "Route 53과 DNS"
slug: "231020"
date: "2023-10-20T00:00:00.000+00:00"
description: "Route 53과 DNS"
thumbnail: ""
tags: []
---

Route 53이란 AWS에서 제공하는 DNS(Domain Name Service)이다.

## Route 53를 알기전에 알아야할 기초 지식

### 도메인이란

각각의 컴퓨터는 IP라는 고유의 주소를 가지고 있다. 하지만 IP는 숫자로 되있기 때문에 사람이 기억하기 힘들다. 예를 들어 네이버라는 웹사이트를 들어갈때 우리는 naver.com이라는 주소를 치고 들어간다. 이때 naver.com이 사람이 기억하기 쉬운 Domain이다.

### DNS란

DNS는 도메인과 도메인에 해당하는 IP 정보를 가지고 있다가 도메인 주소에 대한 요청이 들어왔을 때 이에 해당하는 ip를 알려주는 서버이다. 마치 친구의 이름에 해당하는 번호를 가지고있는 전화번호 주소록 같은 역할을 한다.

## DNS가 돌아가는 전체 구조

1. 서버 운영자가 도메인을 산다.
2. 구매한 도메인에다가 IP를 연결시킨다. 즉, 도메인으로 들어온 사람이 IP에 접속 할 수 있도록 한다.
3. 클라이언트는 도메인으로 접속 하려고 했을 때 그 도메인의 IP를 알아내야 한다.

### 1. 도메인 구입

레지스터라는 도메인 구매 대행을 해주는 회사를 찾아간다. (ex. 가비아, aws route 53) 나 도메인 사고싶어 !

등록 대행자(레지스터)를 통해서 등록소(레지스트리)에게서 산다.

### 2. 도메인 IP 연결

도메인 네임 서버를 장만하고, 서버에 도메인과 ip를 매칭하는 세팅을 한다. 세팅을 한 후 레지스터가 레지스트리에게 도메인 네임 서버에 대한 정보를 알려준다. 등록소는 등록소가 가지고 있는 도메인 네임 서버에 그 정보를 기록해둔다.

이는 도메인 IP를 매칭하는 작업이다.

### 3. 클라이언트가 어떻게 IP를 알아낼 수 있는가

클라이언트는 인터넷은 연결하는 순간 통신을 제공하는 사업자가 컴퓨터가 사용할 도메인 네임 서버의 서버를 자동으로 세팅해준다.

클라이언트는 어떤 도메인에 접속을 하려고 하면 처음에 자동 세팅된 도메인 네임 서버에게 IP를 물어보게 된다.

### 이때 도메인 네임 서버는 누구에게 IP정보를 물어볼까?

1. 클라이언트가 example.com으로 들어갔다. 클라이언트는 도메인의 ip를 모르기 때문에 처음 세팅된 도메인 네임 서버에게 IP를 물어본다.
2. 도메인 네임 서버도 모르기 때문에 일단 루트 네임 서버에게 물어본다. (루트한테 먼저 가는 과정은 약속되어있다.)
3. 루트 네임 서버는 모든 네임서버에 상수로 적혀있다. (바뀌지 않음) 루트 네임 서버는 “.com” 주소를 관리하는 운영 서버 정보를 알려준다.
4. 다시 도메인 네임 서버는 루트 네임 서버가 알려준 네임 서버에게 가서 물어본다. example.com의 IP가 뭐에요? 하지만 모른다.. example.com 의 네임서버에게 물어보세요 하고 정보를 준다.
5. 도메인 네임서버는 정보를 준 곳에 접속해서 [example.com](http://example.com)의 IP가 뭐에요?라고 물어보면 IP를 응답해준다.
6. 도메인 네임 서버는 받아온 IP 정보를 클라이언트에게 다시 알려준다.
7. 클라이언트는 IP주소로 접속한다.

이 과정을 봤을 때 Route 53이 하는 일이 뭘까?

### Route 53이 하는 핵심 기능

1. 등록 대행자(레지스터)
2. 도메인 네임 서버 임대해 주는 역할

## DNS 디버그

Dig은 주로 DNS(Domain Name System) 조회 도구로 사용되며 도메인 이름과 IP 주소 관련 정보를 검색할 수 있다.

➡️ [Dig-WebSite](https://www.digwebinterface.com/)

dig 명령어로 조회가 가능하다. 명령어를 치면 클라이언트가 도메인 입력 후 IP를 얻어내는 과정을 나타내주는 로그가 나온다.

```bash
dig +trace example.com
```

![image](https://hyebin-markdown-blog.s3.ap-northeast-2.amazonaws.com/log/2310/231020-1.png)

Route 53와 DNS가 무엇인지 알았으니 다음엔 직접 도메인을 구매해서 등록해봐야겠다. 👀

## Reference

- [생활코딩 영상 참고](https://www.youtube.com/watch?v=AnViePe2mj8&list=PLuHgQVnccGMCas8a4f0uIg5X4uERoG6gb&index=2)
- [AWS-Route-53이란](https://insight-bgh.tistory.com/261)
